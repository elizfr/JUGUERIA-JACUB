"use strict";
var trueMobile, $body = $("body"), $bodyWrapper = $("#body-wrapper"), $header = $("#header"), $headerMobile = $("#header-mobile"), $footer = $("#footer"), $pageLoader = $("#page-loader"), $navToggle = $("#nav-toggle"), $navMain = $("#nav-main"), $messengerToggle = $('[data-toggle="messenger"]'), $messenger = $("#messenger"), $navAdditionalToggle = $('[data-toggle="nav-additional"]'), $navAdditional = $("#nav-additional"), $bodyOverlay = $("#body-overlay"), $backToTop = $("#back-to-top"), $panelCartToggle = $('[data-toggle="panel-cart"]'), $panelCart = $("#panel-cart");
function showPanelCart() {
    $panelCart.addClass("show"),
    $bodyOverlay.fadeIn(400)
}
function hidePanelCart() {
    $panelCart.removeClass("show"),
    $bodyOverlay.fadeOut(400)
}
var $panelMobileToggle = $('[data-toggle="panel-mobile"]')
  , $panelMobile = $("#panel-mobile");
function showPanelMobile() {
    $panelMobile.addClass("show"),
    $bodyOverlay.fadeIn(400)
}
function hidePanelMobile() {
    $panelMobile.removeClass("show"),
    $bodyOverlay.fadeOut(400)
}
var Core = {
    init: function() {
        this.Basic.init(),
        this.Component.init()
    },
    Basic: {
        init: function() {
            this.systemDetector(),
            this.backgrounds(),
            this.parallax(),
            this.navigation()
        },
        animations: function() {
            $(".animated").appear(function() {
                var o = $(this)
                  , e = $(this).data("animation-delay");
                setTimeout(function() {
                    o.addClass(o.data("animation")).addClass("visible")
                }, e)
            })
        },
        backgrounds: function() {
            $(".bg-image, .post-wide .post-image, .post.single .post-image").each(function() {
                var o = $(this).children("img").attr("src");
                $(this).css("background-image", "url(" + o + ")").children("img").hide()
            });
            var o = $(".bg-video");
            o && o.YTPlayer(),
            $(window).width() < 1200 && o && (o.prev(".bg-video-placeholder").show(),
            o.remove())
        },
        pageTransition: function() {
            $bodyWrapper.length ? ($bodyWrapper.animsition({
                inClass: "fade-in",
                outClass: "fade-out-up-sm",
                inDuration: 800,
                outDuration: 800,
                linkElement: 'a:not([target="_blank"]):not([href^="#"])',
                loading: !0,
                loadingParentElement: "body",
                loadingClass: "animsition-loading",
                loadingInner: "",
                timeout: !1,
                timeoutCountdown: 5e3,
                onLoadEvent: !0,
                browser: ["animation-duration", "-webkit-animation-duration"],
                overlay: !1,
                overlayClass: "animsition-overlay-slide",
                overlayParentElement: "body",
                transition: function(o) {
                    window.location.href = o
                }
            }),
            $bodyWrapper.on("animsition.inStart", function() {
                Core.Basic.animations()
            })) : Core.Basic.animations()
        },
        parallax: function() {
            trueMobile || ($(".bg-parallax").attr("data-top-bottom", "background-position-y: 30%").attr("data-bottom-top", "background-position-y: 70%"),
            skrollr.init({
                forceHeight: !1
            }))
        },
        systemDetector: function() {
            var o = {
                Android: function() {
                    return navigator.userAgent.match(/Android/i)
                },
                BlackBerry: function() {
                    return navigator.userAgent.match(/BlackBerry/i)
                },
                iOS: function() {
                    return navigator.userAgent.match(/iPhone|iPad|iPod/i)
                },
                Opera: function() {
                    return navigator.userAgent.match(/Opera Mini/i)
                },
                Windows: function() {
                    return navigator.userAgent.match(/IEMobile/i)
                },
                any: function() {
                    return o.Android() || o.BlackBerry() || o.iOS() || o.Opera() || o.Windows()
                }
            };
            trueMobile = o.any()
        },
        navigation: function() {
            $("#header").height();
            var o = $("#nav-main, [data-local-scroll]");
            o.find("a").on("click", function() {
                $(this).blur()
            }),
            o.localScroll({
                duration: 700
            }),
            $(".set-fullscreen").localScroll({
                duration: 300
            });
            var e = $("#nav-main");
            e.find("li.has-dropdown > a").on("click", function() {
                $(this);
                var o = $(this).parent("li");
                return o.hasClass("dropdown-show") ? (o.removeClass("dropdown-show"),
                $body.removeClass("dropdown-visible")) : (o.siblings(".dropdown-show").removeClass("dropdown-show"),
                o.addClass("dropdown-show"),
                $body.addClass("dropdown-visible")),
                !1
            });
            var a = $("#panel-mobile");
            e.clone().attr("id", "nav-main-mobile").removeClass("nav-main").addClass("nav-main-mobile").appendTo("#panel-mobile .module-navigation"),
            $("#nav-main-mobile").find("li.has-dropdown > a").on("click", function() {
                return $(this).next(".dropdown-container, ul").slideToggle(300),
                !1
            }),
            $panelMobileToggle.on("click", function() {
                return a.hasClass("show") ? hidePanelMobile() : showPanelMobile(),
                !1
            })
        }
    },
    Component: {
        init: function() {
            this.backTotop(),
            this.carousel(),
            this.cart(),
            this.customControls(),
            this.forms(),
            this.map(),
            this.modal(),
            this.panelDetails(),
            this.twitter()
        },
        backTotop: function() {
            $backToTop.length && $backToTop.on("click", function() {
                return $("body, html").animate({
                    scrollTop: 0
                }, 1e3),
                !1
            })
        },
        carousel: function() {
            $(".carousel").slick(),
            $("#section-main-1-carousel-image").slick({
                dots: !0,
                speed: 800,
                arrows: !1,
                asNavFor: "#section-main-1-carousel-content"
            });
            var o = $("#section-main-1-carousel-content");
            o.slick({
                dots: !1,
                speed: 800,
                arrows: !1,
                autoplay: !0,
                autoplaySpeed: 3500,
                asNavFor: "#section-main-1-carousel-image"
            });
            var e = o.next(".content-nav");
            e.children(".next").on("click", function() {
                return o.slick("slickNext"),
                $(this).blur(),
                !1
            }),
            e.children(".prev").on("click", function() {
                return o.slick("slickPrev"),
                $(this).blur(),
                !1
            }),
            $("#section-main-2-slider").slick({
                dots: !0,
                speed: 800,
                arrows: !0,
                autoplay: !0,
                autoplaySpeed: 3500
            }),
            $(".gallery-carousel", "#content").slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                infinite: !0,
                asNavFor: ".gallery-nav"
            }),
            $(".gallery-nav", "#content").slick({
                slidesToShow: 3,
                slidesToScroll: 1,
                infinite: !0,
                centerMode: !0,
                focusOnSelect: !0,
                responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3
                    }
                }],
                asNavFor: ".gallery-carousel"
            })
        },
        customControls: function() {
            var o = $('<svg class="icon" x="0px" y="0px" viewBox="0 0 32 32"><path stroke-dasharray="19.79 19.79" stroke-dashoffset="19.79" fill="none" stroke="#FFFFFF" stroke-width="4" stroke-linecap="square" stroke-miterlimit="10" d="M9,17l3.9,3.9c0.1,0.1,0.2,0.1,0.3,0L23,11"/></svg>');
            $(".custom-control-indicator").html(o)
        },
        cart: function() {
            $panelCartToggle.on("click", function() {
                return $panelCart.hasClass("show") ? hidePanelCart() : showPanelCart(),
                !1
            }),
            $panelCart.find('[data-toggle="modal"]').on("click", function() {
                $($(this).attr("href")).modal("show")
            })
        },
        forms: function() {
            $("[data-validate]").each(function() {
                $(this).validate({
                    validClass: "valid",
                    errorClass: "error",
                    onfocusout: function(o, e) {
                        $(o).valid()
                    },
                    errorPlacement: function(o, e) {
                        return !0
                    },
                    rules: {
                        email: {
                            required: !0,
                            email: !0
                        }
                    }
                })
            });
            var o = $(".sign-up-form");
            o.length > 0 && o.submit(function() {
                var o = $(this).find(".btn-submit")
                  , e = $(this);
                return !!e.valid() && (o.addClass("loading"),
                $.ajax({
                    type: e.attr("method"),
                    url: e.attr("action"),
                    data: e.serialize(),
                    cache: !1,
                    dataType: "jsonp",
                    jsonp: "c",
                    contentType: "application/json; charset=utf-8",
                    error: function(e) {
                        setTimeout(function() {
                            o.addClass("error")
                        }, 1200)
                    },
                    success: function(e) {
                        "success" != e.result ? o.addClass("error") : o.addClass("success")
                    },
                    complete: function(e) {
                        setTimeout(function() {
                            o.removeClass("loading error success")
                        }, 6e3)
                    }
                }),
                !1)
            });
            var e = $("#booking-form");
            e.length > 0 && e.submit(function() {
                var o = $(this).find(".btn-submit")
                  , e = $(this);
                return !!e.valid() && (o.addClass("loading"),
                $.ajax({
                    type: "POST",
                    url: "assets/php/booking-form.php",
                    data: e.serialize(),
                    error: function(e) {
                        setTimeout(function() {
                            o.addClass("error")
                        }, 1200)
                    },
                    success: function(e) {
                        "success" != e ? o.addClass("error") : o.addClass("success")
                    },
                    complete: function(e) {
                        setTimeout(function() {
                            o.removeClass("loading error success")
                        }, 6e3)
                    }
                }),
                !1)
            })
        },
        map: function() {
            var o, e, a = {
                zoom: 15,
                mapTypeControl: !1,
                panControl: !1,
                zoomControl: !0,
                scaleControl: !1,
                streetViewControl: !1,
                scrollwheel: !1
            };
            if ($("#google-map-1").length) {
                var t = new google.maps.LatLng(40.758895,-73.985131);
                (o = new google.maps.Map(document.getElementById("google-map-1"),a)).panTo(t);
                new google.maps.Marker({
                    position: t,
                    map: o,
                    icon: {
                        url: "assets/img/location-pin.png",
                        anchor: new google.maps.Point(46,115)
                    }
                })
            }
            if ($("#google-map-2").length) {
                var n = new google.maps.LatLng(39.758895,-75.985131);
                (e = new google.maps.Map(document.getElementById("google-map-2"),a)).panTo(n);
                new google.maps.Marker({
                    position: n,
                    map: e,
                    icon: {
                        url: "assets/img/location-pin.png",
                        anchor: new google.maps.Point(46,115)
                    }
                })
            }
        },
        modal: function() {
            $(".modal[data-timeout]").each(function() {
                var o = $(this).data("timeout")
                  , e = $(this);
                setTimeout(function() {
                    e.modal("show")
                }, o)
            }),
            $('[data-toggle="video-modal"]').on("click", function() {
                var o = $(this).data("target")
                  , e = $(this).data("video");
                return $(o + " iframe").attr("src", e + "?autoplay=1"),
                $(o).modal("show"),
                $(o).on("hidden.bs.modal", function() {
                    var e = $(o + " .modal-content");
                    $(o + " iframe").remove(),
                    e.html('<iframe height="500"></iframe>')
                }),
                !1
            })
        },
        tooltip: function() {
            $("[data-toggle='tooltip']").tooltip()
        },
        twitter: function() {
            if ($("#twitter-feed").length) {
                twitterFetcher.fetch({
                    profile: {
                        screenName: "suelopl"
                    },
                    domId: "twitter-feed",
                    maxTweets: 2,
                    enableLinks: !0,
                    showPermalinks: !1,
                    showUser: !1,
                    showInteraction: !1,
                    showTime: !0,
                    lang: "en"
                })
            }
        },
        panelDetails: function() {
            var o = $(".panel-details");
            o.on("show.bs.collapse", ".collapse", function() {
                $(this).parents(".panel-details-container").find(".collapse.show").collapse("hide")
            }),
            o.on("hide.bs.collapse", ".collapse", function() {
                $(this).prev(".panel-details-title").find("input").prop("checked", !0)
            }),
            o.find(".panel-details-title a").on("click", function() {
                $(this).blur()
            })
        }
    }
};
function hideDropdown() {
    $("li.dropdown-show", "#nav-main").removeClass("dropdown-show"),
    $body.removeClass("dropdown-visible")
}
Core.Basic.pageTransition(),
$(document).ready(function() {
    Core.init()
}),
$(document).on("click", function(o) {
    "body" != o.target.localName && "html" != o.target.localName && "body-wrapper" != o.target.id || hideDropdown(),
    "body-overlay" == o.target.id && hidePanelCart()
}),
$(window).on("scroll", function() {
    hideDropdown()
});
var stickableNavOffset, $stickableNav = $(".stick-to-content");
function setStickyElement(o) {
    var e = 0;
    $(window).width() <= 991 && (e = $headerMobile.outerHeight()),
    o > stickableNavOffset - e ? $stickableNav.css({
        position: "fixed",
        top: e + "px",
        width: $stickableNav.innerWidth() + "px"
    }) : $stickableNav.removeAttr("style"),
    o > $footer.offset().top - $stickableNav.outerHeight() && $stickableNav.css({
        position: "absolute",
        top: $footer.offset().top - $stickableNav.outerHeight() - stickableNavOffset + "px"
    })
}
function setBackToTop(o) {
    o > $(window).height() && !$backToTop.hasClass("visible") ? $backToTop.addClass("visible") : o <= $(window).height() && $backToTop.hasClass("visible") && $backToTop.removeClass("visible")
}
$stickableNav.length && (stickableNavOffset = $stickableNav.offset().top),
$(window).on("scroll", function() {
    var o = $(window).scrollTop();
    $stickableNav.length && setStickyElement(o),
    $backToTop.length && setBackToTop(o)
});
